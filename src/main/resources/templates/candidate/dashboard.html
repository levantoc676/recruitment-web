<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bảng điều khiển Nhà tuyển dụng - ELITE.vn</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" th:href="@{/css/employer-dashboard.css}">
</head>
<body>
<!-- Header -->
<div th:replace="layout/header :: header"></div>

<!-- HERO / SEARCH -->
<section class="dashboard-hero py-5" style="background: linear-gradient(135deg, #1cc88a, #4e73df); color: white;">
  <div class="container text-center">
    <h1 class="fw-bold mb-3">ELITE - Đăng tin tuyển dụng, Tìm kiếm ứng viên tài năng</h1>
    <p class="lead mb-4">Quản lý tin tuyển dụng, theo dõi hồ sơ và kết nối nhân tài cho doanh nghiệp của bạn</p>

    <form class="d-flex justify-content-center flex-wrap gap-2" action="/employer/search-cv" method="GET">
      <input class="form-control" name="keyword" style="max-width: 280px; border-radius: 50px;"
             placeholder="Nhập kỹ năng, chức danh ứng viên..." th:value="${param.keyword}">
      <input class="form-control" name="location" style="max-width: 200px; border-radius: 50px;"
             placeholder="Địa điểm làm việc" th:value="${param.location}">
      <button class="btn btn-light text-dark fw-semibold" style="border-radius: 50px;" type="submit">
        <i class="fa fa-search me-1"></i> Tìm ứng viên
      </button>
    </form>
  </div>
</section>

<!-- QUICK ACTIONS / STATS -->
<section class="quick-actions container text-center my-5">
  <div class="row g-4">
    <div class="col-md-3">
      <a th:href="@{/employer/job/new}" class="btn btn-success w-100 py-3 fw-bold">
        <i class="fa-solid fa-plus me-2"></i> Đăng tin tuyển dụng mới
      </a>
    </div>
    <div class="col-md-3">
      <a th:href="@{/employer/jobs}" class="btn btn-outline-primary w-100 py-3">
        <i class="fa-solid fa-briefcase me-2"></i> Quản lý tin đăng
      </a>
    </div>
    <div class="col-md-3">
      <a th:href="@{/employer/applicants}" class="btn btn-outline-primary w-100 py-3">
        <i class="fa-solid fa-user-check me-2"></i> Quản lý hồ sơ ứng tuyển
      </a>
    </div>
    <div class="col-md-3">
      <a th:href="@{/employer/company-profile}" class="btn btn-outline-secondary w-100 py-3">
        <i class="fa-solid fa-building me-2"></i> Hồ sơ công ty
      </a>
    </div>
  </div>

  <!-- Thống kê nhanh -->
  <div class="row text-center mt-5">
    <div class="col-md-3">
      <h4 th:text="${jobCount}">12</h4>
      <p>Tin đang hiển thị</p>
    </div>
    <div class="col-md-3">
      <h4 th:text="${cvToday}">4</h4>
      <p>CV mới trong 24h</p>
    </div>
    <div class="col-md-3">
      <h4 th:text="${totalViews}">820</h4>
      <p>Lượt xem tin</p>
    </div>
    <div class="col-md-3">
      <h4 th:text="${savedCVs}">9</h4>
      <p>CV đã lưu</p>
    </div>
  </div>
</section>

<!-- JOB MANAGEMENT -->
<div class="container mb-5">
  <ul class="nav nav-tabs justify-content-center" id="jobTab" role="tablist">
    <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#active-jobs">Đang hiển thị</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#expired-jobs">Đã hết hạn</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#pending-jobs">Chờ duyệt</button></li>
    <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#draft-jobs">Tin nháp</button></li>
  </ul>

  <div class="tab-content mt-4">
    <!-- Tin đang hiển thị -->
    <div class="tab-pane fade show active" id="active-jobs">
      <div class="row" th:if="${activeJobs != null}">
        <div class="col-md-6 col-lg-4 mb-4" th:each="job : ${activeJobs}">
          <div class="job-card p-3 shadow-sm rounded">
            <h5 class="fw-bold mb-2" th:text="${job.title}">Nhân viên Kinh doanh</h5>
            <p class="text-muted small mb-2" th:text="${job.location}"></p>
            <div class="d-flex justify-content-between small mb-2">
              <span><i class="fa-solid fa-eye me-1"></i> <span th:text="${job.views}">150</span> lượt xem</span>
              <span><i class="fa-solid fa-file-lines me-1"></i> <span th:text="${job.applicants}">12</span> CV đã nộp</span>
            </div>
            <div class="d-flex gap-2">
              <a th:href="@{/employer/job/{id}/applicants(id=${job.id})}" class="btn btn-sm btn-outline-primary">Xem CV</a>
              <a th:href="@{/employer/job/{id}/edit(id=${job.id})}" class="btn btn-sm btn-outline-secondary">Sửa</a>
              <a th:href="@{/employer/job/{id}/extend(id=${job.id})}" class="btn btn-sm btn-outline-success">Gia hạn</a>
              <a th:href="@{/employer/job/{id}/hide(id=${job.id})}" class="btn btn-sm btn-outline-warning">Ẩn</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Các tab khác có thể lặp lại logic tương tự -->
    <div class="tab-pane fade" id="expired-jobs">...</div>
    <div class="tab-pane fade" id="pending-jobs">...</div>
    <div class="tab-pane fade" id="draft-jobs">...</div>
  </div>
</div>

<!-- Footer -->
<div th:replace="layout/footer :: footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/dashboard.js}"></script>
</body>
</html>
