<!-- file chỉ là fragment, vẫn cần khai báo namespace -->
<header th:fragment="header" xmlns:th="http://www.thymeleaf.org">
  <div class="logo"><a class="logo" href="/index">TopCV</a></div>
  <nav class="nav-menu">
    <ul>
      <li><a href="/jobs">Việc làm</a></li>
      <li><a href="/cv/create">Tạo CV</a></li>
      <li><a href="/tools">Công cụ</a></li>
      <li><a href="/blog">Cẩm nang nghề nghiệp</a></li>
      <li><a href="/pro">TopCV Pro</a></li>
    </ul>
  </nav>
  <!-- Auth buttons -->
  <div class="auth-buttons">
    <!-- Nếu chưa login -->
    <div th:if="${not #authentication.authenticated}">
      <button onclick="location.href='/auth/register'">Đăng ký</button>
      <button onclick="location.href='/auth/login'">Đăng nhập</button>
    </div>

    <!-- Nếu đã login -->
    <div style="display:flex; align-items:center; gap:8px;"
         th:if="${#authentication.authenticated}">
      Xin chào, <span th:text="${#authentication.name}"></span>!
      <span th:each="auth : ${#authentication.authorities}"
            th:text="${auth.authority} + ' '"></span>
      <button onclick="location.href='/auth/logout'">Đăng xuất</button>

      <!-- ADMIN → Quản lý -->
      <button onclick="location.href='/admin/dashboard'"
              th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
        Quản lý
      </button>

      <!-- EMPLOYER → Đăng tuyển -->
      <button onclick="location.href='/jobs/create'"
              th:if="${#authorization.expression('hasRole(''EMPLOYER'')')}">
        Đăng tuyển
      </button>

      <!-- CANDIDATE → Tạo CV -->
      <button onclick="location.href='/cvs/create'"
              th:if="${#authorization.expression('hasRole(''CANDIDATE'')')}">
        Tạo CV
      </button>


    </div>
  </div>

</header>

